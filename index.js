
let recipes = [
    {
        "name": "Black Widow",
        "tags": [
            "Tart",
            "Lemon",
            "Blackberry",
            "Tequila"
        ],
        "ingredients": [
            "1.5oz Tequila",
            "1oz Lemon Juice",
            "0.5oz Blackberry Rosemary"
        ],
        "directions": [
            "Shake & Strain into a coupe",
            "Garnish with a dried lemon wheel"
        ]
    },
    {
        "name": "Princess Peach",
        "tags": [
            "Sweet",
            "Lemon",
            "Peach",
            "Vodka"
        ],
        "ingredients": [
            "2oz Peach & Orange Blossom Vodka",
            "0.5oz Peach Schnapps",
            "1oz Lemon Juice",
            "0.5 Orange Juice",
            "0.5 Simple Syrup",
            "Sprite"
        ],
        "directions": [
            "Shake & Pour into a tall glass",
            "Top with sprite",
            "Garnish with a orange wheel half"
        ]
    },
    {
        "name": "Green Tea Shot",
        "tags": [
            "Sour",
            "Lemon",
            "Lime",
            "Peach",
            "Whiskey"
        ],
        "ingredients": [
            "0.75oz Jameson",
            "0.75oz Peach Schnapps",
            "0.75oz Sweet & Sour Mix",
        ],
        "directions": [
            "Shake & Strain into a shot glass",
        ]
    },
    {
        "name": "Sweet Baby K",
        "tags": [
            "Sweet",
            "Lemon",
            "Peach",
            "Whiskey"
        ],
        "ingredients": [
            "1.5oz Peach Bourbon",
            "1oz Lemon Juice",
            "0.5oz Simple Syrup",
            "Sprite"
        ],
        "directions": [
            "Shake with mint & Pour into a tall glass",
            "Top with sprite",
            "Garnish with a lime"
        ]
    },
    {
        "name": "Lemon Drop Martini",
        "tags": [
            "Tart",
            "Lemon",
            "Vodka"
        ],
        "ingredients": [
            "1.5oz Vodka",
            "0.75oz Lemon Juice",
            "0.75oz Simple Syrup",
        ],
        "directions": [
            "Sugar the rim of a coupe",
            "Shake ingredients & Strain",
            "Garnish with a lemon wheel"
        ]
    },
    {
        "name": "Margarita",
        "tags": [
            "Sour",
            "Lime",
            "Tequila"
        ],
        "ingredients": [
            "1.5oz Tequila",
            "0.5oz Triple Sec",
            "Sweet & Sour Mix"
        ],
        "directions": [
            "Salt the rip of a tall glass",
            "Build ingredients and top with Sweet & Sour Mix",
            "Garnish with lime wedge",
        ]
    },
    {
        "name": "Smoked Old Fashioned",
        "tags": [
            "Spirit Forward",
            "Orange",
            "Bourbon"
        ],
        "ingredients": [
            "2oz Bourbon",
            "0.5oz Simple Syrup",
            "4 drops of orange bitters",
        ],
        "directions": [
            "Shake the bourbon in a smoked shaker",
            "Add the simple syrup and stir with a big ice cube",
            "Garnish with an orange twist, cherry, and bitters",
        ]
    },
    {
        "name": "Caipirinha",
        "tags": [
            "Lime",
            "Cachaca",
        ],
        "ingredients": [
            "2oz Cachaca",
            "0.5oz Simple Syrup",
            "4 Lime Wedges",
        ],
        "directions": [
            "Pour ingredients into a short glass",
            "Muddle 4 lime wedges in glass",
            "Top with ice and stir",
        ]
    },
    {
        "name": "Ginger Basil Smash",
        "tags": [
            "Lemon",
            "Ginger",
            "Bourbon"
        ],
        "ingredients": [
            "1.5oz Old Dominic Bourbon",
            "1oz Lemon Juice",
            "0.5oz Ginger Simple Syrup",
            "Club Soda"
        ],
        "directions": [
            "Shake with 4 basil leaves",
            "Pour into a tall glass",
            "Top with club soda"
        ]
    },
    {
        "name": "Oaxacan Old Fashion",
        "tags": [
            "Spirit Forward",
            "Mezcal",
            "Tequila",
        ],
        "ingredients": [
            "2oz Campo Bravo Reposado",
            "0.5oz Mezcal",
            "0.25oz Simple Syrup",
            "0.25oz Agave Syrup",
            "3 drops of orange & chocolate bitters",
        ],
        "directions": [
            "Stir ingredients",
            "Pour over a large ice cube in a short glass",
            "Garnish with an orange twist & bitters",
        ]
    },
    {
        "name": "Josh's Jam",
        "tags": [
            "___",
            "Orange",
            "Raspberry",
            "Gin",
        ],
        "ingredients": [
            "1.5oz Gin",
            "0.5oz Cappelletti",
            "1oz Raspberry Simple Syrup",
            "Dash Orange Juice",
        ],
        "directions": [
            "Shake & Strain into a coupe",
            "Garnish with ___",
        ]
    },
    {
        "name": "K.U. Clover",
        "tags": [
            "Balanced",
            "Lemon",
            "Frothy",
            "Raspberry",
            "Gin",
        ],
        "ingredients": [
            "1.5oz Gin",
            "0.5oz St. Germain",
            "1oz Lemon Juice",
            "1oz Raspberry Simple Syrup",
            "Egg White",
        ],
        "directions": [
            "Dry shake ingredients with egg whites",
            "Wet shake & strain into a coupe",
            "Garnish with ___?",
        ]
    },
    {
        "name": "Paloma",
        "tags": [
            "___",
            "Lime",
            "Grapefruit",
            "Tequila",
            "Mezcal",
        ],
        "ingredients": [
            "1.5oz Mezcal",
            "1oz Grapefruit Juice",
            "1 Dash of Simple Syrup",
            "1 Dash of Lime Juice",
            "Club Soda",
        ],
        "directions": [
            "Shake & pour into a tall glass",
            "Top with club soda",
        ]
    },
    {
        "name": "Sarah Smile",
        "tags": [
            "Spirit Forward",
            "Cinnamon",
            "Gin/Bourbon?",
        ],
        "ingredients": [
            "2oz Old Dominic Gin/Bourbon?",
            "0.5oz Simple Syrup",
            "Barspoon of Cinnamon Mix",
            "Orange Bitters",
        ],
        "directions": [
            "Stir and pour in a small glass over a big ice cube",
            "Garnish with an orange twist and bitters",
        ]
    },
    {
        "name": "Sazerac",
        "tags": [
            "___",
            "Rye",
        ],
        "ingredients": [
            "1.5oz Sazerac Rye",
            "0.5oz Simple Syrup",
            "5 Dashes of Paychaud's Bitters",
            "Absinthe",
        ],
        "directions": [
            "Mist glass with Absinthe",
            "Stir ingredients and pour over a big ice cube",
            "Garnish with ___",
        ]
    },
    {
        "name": "Whiskey Sour",
        "tags": [
            "Sour",
            "Lemon",
            "Bourbon",
        ],
        "ingredients": [
            "1.5oz Old Dominic Bourbon",
            "1oz Lemon Juice",
            "0.5oz Simple Syrup",
            "4 Dashes of Spiced Cherry Bitters",
        ],
        "directions": [
            "Add egg whites and dry shake ingredients",
            "Wet shake and strain over a big cube",
            "Garnish with __",
        ]
    },
    {
        "name": "Amaretto Sour",
        "tags": [
            "Sweet",
            "Lemon",
            "Lime",
            "Amaretto",
        ],
        "ingredients": [
            "1.5oz Amaretto",
            "Sweet & Sour Mix",
        ],
        "directions": [
            "Build ingredients into a short glass with ice",
            "Garnish with a cherry",
        ]
    },
    {
        "name": "Bloody Mary",
        "tags": [
            "Tomato",
            "Vodka",
        ],
        "ingredients": [
            "1.5oz Vodka",
            "Bloody Mary Mix",
        ],
        "directions": [
            "Salt rim of a tall glass",
            "Build ingredients over ice",
            "Garnish with 2 olives and a lime wedge",
        ]
    },
    {
        "name": "Cosmopolitan",
        "tags": [
            "Sweet",
            "Lime",
            "Cranberry",
            "Vodka",
        ],
        "ingredients": [
            "1.5oz Vodka",
            "0.5oz Triple Sec",
            "0.5oz Lime Juice",
            "1oz Cranberry Juice",
        ],
        "directions": [
            "Shake ingredients and strain in a coupe",
            "Garnish with an orange twist",
        ]
    },
    /**
     * Here is the format for the recipe cards just copy and paste
     * after the previous entry and fill in the underscores. You can
     * add however many tags, ingredients, & directions, I just did three each
     * for the default format.
    {
        "name": "___",
        "tags": [
            "___",
            "___",
            "___",
        ],
        "ingredients": [
            "___",
            "___",
            "___",
        ],
        "directions": [
            "___",
            "___",
            "___",
        ]
    },
    {
        "name": "___",
        "tags": [
            "___",
            "___",
            "___",
        ],
        "ingredients": [
            "___",
            "___",
            "___",
        ],
        "directions": [
            "___",
            "___",
            "___",
        ]
    },
    */
]

let tagColors = {
    'Tart': '#D6F660',
    'Sweet': '#F1948A',
    'Sour': '#BDEA61',
    'Spirit Forward': '#DFB662',
    'Balanced': '#F6DDCC',
    'Lemon': '#F7DC6F',
    'Lime': '#7DCEA0',
    'Orange': '#FFA143',
    'Frothy': '#A9CCE3',
    'undefined': '#E5E7E9'
}

let syrups = [
    {
        'name': 'Sweet & Sour Mix',
        'ingredients': [
            '1 parts Simply Syrup',
            '1 parts Agave Syrup',
            '2 parts Lime',
            '1 parts Water',
        ],
        'directions': [
            'Fill lime juice to 1Q line',
            'Fill Agave Syrup to 1.5Q line',
            'Fill Simple Syrup to 2Q line',
            'Fill Water to 3Q line',
        ]
    },
    {
        'name': 'Blackberry Rosemary Syrup',
        'ingredients': [
            '1 parts Blackberries',
            '1 parts Sugar',
            '1 parts Water',
            'Rosemary',
        ],
        'directions': [
            'Boil ingredients together',
            'Add rosemary until you can smell it',
            'Strain normally, then a second time with a fine mesh strainer',
        ]
    },
    {
        'name': 'Blueberry Syrup',
        'ingredients': [
            '1 parts Blueberries',
            '1 parts Sugar',
            '1 parts Water',
            'Half a lemon'
        ],
        'directions': [
            'Boil ingredients together',
            'Muddle blueberries and squeeze half a lemon',
            'Strain into a container',
        ]
    },
    {
        'name': 'Raspberry Syrup',
        'ingredients': [
            '1 parts Raspberries',
            '1 parts Sugar',
            '1 parts Water',
        ],
        'directions': [
            'Boil ingredients together',
            'Muddle raspberries',
            'Strain into a container',
        ]
    },
]

function alphabeticSort( a, b ) {
    if (a.name < b.name) {
        return -1
    } else if (a.name > b.name) {
        return 1
    }
    return 0
}

function searchRecipes(tag) {
    let filteredRecipes = recipes.filter( function(recipe) {
        let keyword
        if (tag) {
            keyword = tag
        } else {
            keyword = document.getElementById("searchInput").value
        }
        recipeValues = Object.values(recipe)
        foundMatch = false
        recipeValues.forEach( function(recipeValue) {
            if (typeof recipeValue == 'object') {
                recipeValue.forEach( function(val) {
                    if (val.toString().toLowerCase().includes(keyword.toString().toLowerCase())) {
                        foundMatch = true
                    }
                })
            }
            if (recipeValue.toString().toLowerCase().includes(keyword.toString().toLowerCase())) {
                foundMatch = true
            }
        })
        return foundMatch
    })
    placeRecipes(filteredRecipes)
}

function placeRecipes(listOfRecipes) {
    clearPage()
    let mainContainer = document.getElementById("mainContainer")
    listOfRecipes.sort(alphabeticSort)
    listOfRecipes.forEach( function(recipe, i) {
        let recipeCardFormat = `
        <div class="card shadow p-3 mb-4 bg-body rounded" style="width: 24rem;">
        <div class="card-body" id="recipe${i}">
        <h2 class="card-title" style="margin-bottom: .25rem;">${recipe.name}</h2>
        <div id="tags${i}"></div>
        <h5 class="card-text">Ingredients</h5>
        <ul id="ingredients${i}"></ul>
        <h5 class="card-text">Directions</h5>
        <div id="directions${i}"></div>
        </div>
        </div>
        `
        // places the recipe card
        let recipeEl = document.createElement('div')
        recipeEl.setAttribute('class', 'col')
        recipeEl.innerHTML = recipeCardFormat
        mainContainer.appendChild(recipeEl)
    
        // places the tags
        let tagsEl = document.getElementById(`tags${i}`)
        recipe.tags.forEach( function(tag) {
            let color = '#E5E7E9'
            if (Object.keys(tagColors).includes(tag)) {
                color = tagColors[tag]
            }
            tagsEl.innerHTML += `<button class="btn btn-light" style="--bs-btn-padding-y: .1rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem; margin-bottom: .5rem; margin-right: .25rem; background-color: ${color}; border-color: ${color};" onclick="searchRecipes('${tag}')">${tag}</button>`
        })
    
        // places the ingredients
        let ingredientsEl = document.getElementById(`ingredients${i}`)
        recipe.ingredients.forEach( function(ingredient) {
            ingredientsEl.innerHTML += `<li><p class="card-text">${ingredient}</p></li>`
        })
        // places the directions
        let directionsEl = document.getElementById(`directions${i}`)
        recipe.directions.forEach( function(direction) {
            directionsEl.innerHTML += `<p class="card-text" style="margin: 0; padding: 0;">${direction}</p>`
        })
    })
}

function clearPage() {
    let mainContainer = document.getElementById("mainContainer")
    mainContainer.innerHTML = ''
}

function showDrinks() {
    placeRecipes(recipes)
}

function placeSyrups(listOfSyrups) {
    clearPage()
    let mainContainer = document.getElementById("mainContainer")
    listOfSyrups.sort(alphabeticSort)
    listOfSyrups.forEach( function(syrup, i) {
        let syrupCardFormat = `
        <div class="card shadow p-3 mb-4 bg-body rounded" style="width: 24rem;">
        <div class="card-body" id="syrup${i}">
        <h2 class="card-title" style="margin-bottom: .25rem;">${syrup.name}</h2>
        <div id="tags${i}"></div>
        <h5 class="card-text">Ingredients</h5>
        <ul id="ingredients${i}"></ul>
        <h5 class="card-text">Directions</h5>
        <div id="directions${i}"></div>
        </div>
        </div>
        `
        // places the syrup card
        let syrupEl = document.createElement('div')
        syrupEl.setAttribute('class', 'col')
        syrupEl.innerHTML = syrupCardFormat
        mainContainer.appendChild(syrupEl)
    
        // places the ingredients
        let ingredientsEl = document.getElementById(`ingredients${i}`)
        syrup.ingredients.forEach( function(ingredient) {
            ingredientsEl.innerHTML += `<li><p class="card-text">${ingredient}</p></li>`
        })
        // places the directions
        let directionsEl = document.getElementById(`directions${i}`)
        syrup.directions.forEach( function(direction) {
            directionsEl.innerHTML += `<p class="card-text" style="margin: 0; padding: 0;">${direction}</p>`
        })
    })
}

function showSyrups() {
    placeSyrups(syrups)
}

showDrinks()

let input = document.getElementById("searchInput");
input.addEventListener("keypress", function(event) {
  if (event.key === "Enter") {
    event.preventDefault();
    document.getElementById("searchButton").click();
  }
});